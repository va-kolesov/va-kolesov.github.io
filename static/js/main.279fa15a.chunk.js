(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(7),l=n.n(r),s=n(8),o=n(1),c=n(2),u=n(4),m=n(3),d=n(5),h=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"ButtonBase Button Button-"+this.props.style,onClick:function(){e.props.onClick&&e.props.onClick()}},this.props.note)}}]),t}(i.a.Component),p=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"NoteButtons"},this.props.notesState.map((function(t,n){return i.a.createElement(h,{key:n,note:t.note,style:t.style||"default",onClick:function(){e.props.clickable&&e.props.onNoteClick(n)}})})))}}]),t}(i.a.Component),f=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function v(e){return f[e%12]+Math.floor(e/12)}var b=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=function(e){for(var t=[],n=-3;n<=3;n++)t.push(v(e+n));return t}(this.props.note),t=v(this.props.note);(this.props.note>71||this.props.note<24)&&(t=null);var n="";return this.props.style&&(n=this.props.angle>2?"tune down":this.props.angle<-2?"tune up":"tuned"),i.a.createElement("div",{className:"Scale Button-"+(this.props.style||"default")},i.a.createElement("div",{className:"Scale_tick"},i.a.createElement("svg",{viewBox:"-10 0 20 30"},i.a.createElement("path",{d:"M-7,0 Q-2,0 0,25 Q2,0 7,0"}))),i.a.createElement("div",{className:"Scale_content",style:{transform:"rotate(".concat(this.props.angle||0,"deg)")}},t?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"Scale_elem Scale_elem-small r-3"},e[0]?e[0]:""),i.a.createElement("div",{className:"Scale_elem Scale_elem-small r-2"},e[1]?e[1]:""),i.a.createElement("div",{className:"Scale_elem Scale_elem-small r-1"},e[2]?e[2]:""),i.a.createElement("div",{className:"Scale_elem Scale_elem-big r0"},e[3]?e[3]:""),i.a.createElement("div",{className:"Scale_elem Scale_elem-small r1"},e[4]?e[4]:""),i.a.createElement("div",{className:"Scale_elem Scale_elem-small r2"},e[5]?e[5]:""),i.a.createElement("div",{className:"Scale_elem Scale_elem-small r3"},e[6]?e[6]:"")):i.a.createElement(i.a.Fragment,null)),i.a.createElement("div",{className:"Scale_hint"},i.a.createElement("div",{className:"Scale_hint_note"},t&&t),i.a.createElement("div",{className:"Scale_hint_text"},n)))}}]),t}(i.a.Component),E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"prepateNotesState",value:function(e){var t=e.notes,n=e.note,a=e.difference;return t.map((function(e){return{note:e,style:e===n?a<.2?"right":"wrong":""}}))}},{key:"render",value:function(){var e=this.prepateNotesState(this.props),t=e.findIndex((function(e){return e.style})),n="";return-1!==t&&(n=e[t].style),i.a.createElement("div",{className:"Tuner"},i.a.createElement(p,{clickable:this.props.editable,notesState:e,onNoteClick:this.props.onNoteClick}),i.a.createElement(b,{note:this.props.noteNumber,angle:20*this.props.difference,style:n}),i.a.createElement("div",{className:"placehodler"}))}}]),t}(i.a.Component),C=(n(14),n(15),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={opened:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"MenuContainer"},this.state.opened?i.a.createElement("div",{className:"Menu Button-default"},this.props.items.map((function(t,n){return i.a.createElement("div",{className:"MenuItem"+(n?" border":""),onClick:function(){e.setState({opened:!1}),e.props.onItemClick(t)},key:n},t.title)}))):i.a.createElement("div",{className:"ButtonBase MenuButton Button-default",onClick:function(){e.setState({opened:!0})}},this.props.selectedItem))}}]),t}(i.a.Component)),N=function(e){function t(e){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).call(this,e))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"ButtonBase EditButton Button-default",onClick:function(){e.props.onClick()}},i.a.createElement("svg",{className:"Icon",version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 528.899 528.899"},i.a.createElement("g",null,i.a.createElement("path",{d:"M328.883,89.125l107.59,107.589l-272.34,272.34L56.604,361.465L328.883,89.125z M518.113,63.177l-47.981-47.981\r c-18.543-18.543-48.653-18.543-67.259,0l-45.961,45.961l107.59,107.59l53.611-53.611\r C532.495,100.753,532.495,77.559,518.113,63.177z M0.3,512.69c-1.958,8.812,5.998,16.708,14.811,14.565l119.891-29.069\r L27.473,390.597L0.3,512.69z"}))))}}]),t}(i.a.Component),g=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],y=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).noteList=[];for(var a=2;a<=5;a++)for(var i=0;i<g.length;i++)n.noteList.push(g[i]+a);return n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Button-default NoteChooser"},this.noteList.map((function(t,n){return i.a.createElement("div",{className:"MenuItem"+(n?" border":""),key:n,onClick:function(){e.props.onItemClick(t)}},t)})))}}]),t}(i.a.Component),O=[{title:"Standart"},{title:"Drop C"},{title:"Drop D"},{title:"Open C"},{title:"DADGAD"},{title:"Double Drop D"},{title:"Open G"},{title:"Custom"}],S={Standart:["E4","B3","G3","D3","A2","E2"],"Drop C":["D4","A3","F3","C3","G2","C2"],"Drop D":["E4","B3","G3","D3","A2","D2"],"Open C":["E4","C4","G3","C3","G2","C2"],DADGAD:["D4","A3","G3","D3","A2","D2"],"Double Drop D":["D4","B3","G3","D3","A2","D2"],"Open G":["D4","B3","G3","D3","G2","D2"],Custom:["E4","B3","G3","D3","A2","E2"]},j={noiseSuppression:!0,echoCancellation:!1};function k(){alert("Stream generation failed.")}function D(e,t){return 12*Math.log(e/function(e){return 440*Math.pow(2,(e-57)/12)}(t))/Math.LN2}var _=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={note:null,noteNum:null,frequency:null,difference:null,selectedTuning:"Standart",customTuning:["E4","B3","G3","D3","A2","E2"]},n.initialize(),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"update",value:function(){var e=this,t=this.analyser.frequencyBinCount,n=new Float32Array(t);if(this.analyser.getFloatTimeDomainData(n),function(e){for(var t=0,n=0;n<e.length;n++)t=t<Math.abs(e[n])?Math.abs(e[n]):t;return t}(n)>.09){this._resetTimeout&&(clearTimeout(this._resetTimeout),this._resetTimeout=null);var a=function(e,t,n){for(var a=1,i=1e3,r=2;r<t/2;r++){for(var l=0,s=0;s<t/2;s++)l+=Math.abs(e[s]-e[s+r]);l<i&&(a=r,i=l)}return Math.round(n/a)}(n,t,this._sampleRate);if(a){var i=function(e){return Math.round(12*Math.log(e/440)/Math.LN2)+57}(a),r=v(i),l=D(a,i);!function(e){return e<71&&e>24}(i)?this._resetTimeout||(this._resetTimeout=setTimeout((function(){e.setState({note:null,noteNum:null,frequency:null,difference:null})}),1500)):this.setState({note:r,noteNum:i,frequency:a,difference:l})}else this._resetTimeout||(this._resetTimeout=setTimeout((function(){e.setState({note:null,noteNum:null,frequency:null,difference:null})}),1500))}else this._resetTimeout||(this._resetTimeout=setTimeout((function(){e.setState({note:null,noteNum:null,frequency:null,difference:null})}),1500));setTimeout(this.update.bind(this),50)}},{key:"getUserMedia",value:function(e,t){try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia(e,t,k)}catch(n){alert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u043c\u0438\u043a\u0440\u043e\u0444\u043e\u043d\u0443")}}},{key:"gotStream",value:function(e){var t=new AudioContext;this._sampleRate=t.sampleRate;var n=t.createMediaStreamSource(e);this.analyser=t.createAnalyser(),this.analyser.fftSize=4096,n.connect(this.analyser),this.update()}},{key:"initialize",value:function(){window.AudioContext=window.AudioContext||window.webkitAudioContext,this.getUserMedia({audio:j},this.gotStream.bind(this))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"Container"},i.a.createElement("div",{className:"Header"},this.props.debug?i.a.createElement("div",null,i.a.createElement("div",null,this.state.note),i.a.createElement("div",null,this.state.noteNum),i.a.createElement("div",null,this.state.frequency)):i.a.createElement("div",{className:"Logo"},"Guitar Tuner")),i.a.createElement("div",{className:"TopContent"},i.a.createElement(N,{onClick:function(){e.setState({selectedTuning:"Custom"})}}),i.a.createElement(C,{items:O,selectedItem:this.state.selectedTuning,onItemClick:function(t){e.setState({selectedTuning:t.title})}}),i.a.createElement("div",{className:"placehodler"}),void 0!==this.state.editingNote?i.a.createElement(y,{onItemClick:function(t){var n=Object(s.a)(e.state.customTuning);n[e.state.editingNote]=t,e.setState({editingNote:void 0,customTuning:n})}}):i.a.createElement(i.a.Fragment,null)),i.a.createElement(E,{notes:"Custom"===this.state.selectedTuning?this.state.customTuning:S[this.state.selectedTuning],note:this.state.note,noteNumber:this.state.noteNum,frequency:this.state.frequency,editable:"Custom"===this.state.selectedTuning,onNoteClick:function(t){e.setState({editingNote:t})},difference:this.state.difference}))}}]),t}(i.a.Component);l.a.render(i.a.createElement(_,null),document.getElementById("root"))},9:function(e,t,n){e.exports=n(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.279fa15a.chunk.js.map